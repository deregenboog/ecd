imports:
    - { resource: daos.yml }
    - { resource: exports.yml }

services:
    oek.event.diensten_lookup_subscriber:
        class: OekBundle\Event\DienstenLookupSubscriber
        arguments:
            - "@doctrine.orm.entity_manager"
            - "@router"
        tags:
            - { name: kernel.event_subscriber }

    deelnemer_metadata:
        class: Doctrine\ORM\Mapping\ClassMetadata
        arguments:
            - 'OekBundle\Entity\Deelnemer'

    deelname_metadata:
        class: Doctrine\ORM\Mapping\ClassMetadata
        arguments:
            - 'OekBundle\Entity\Deelname'

    OekBundle\Repository\DeelnemerRepository:
        class: OekBundle\Repository\DeelnemerRepository
        arguments:
            - "@doctrine.orm.entity_manager"
            - "@deelnemer_metadata"
        tags:
            - app.doelstelling
        public: true

    OekBundle\Repository\DeelnameRepository:
        class: OekBundle\Repository\DeelnameRepository
        arguments:
            - "@doctrine.orm.entity_manager"
            - "@deelname_metadata"
        public: true

    oek.repository.training:
        class: Doctrine\ORM\EntityRepository
        factory: ["@doctrine", getRepository]
        arguments:
            - OekBundle\Entity\Training

    oek.form.rapportage:
        class: OekBundle\Form\RapportageType
        tags:
            - { name: form.type }

    OekBundle\Report\DeelnemersPerTrainingGroep:
        public: true
        arguments:
            - '@OekBundle\Repository\DeelnemerRepository'
        tags:
            - { name: oek.rapportage, category: Deelnemers }

    OekBundle\Report\DeelnemersVerwezenDoor:
        public: true
        arguments:
            - '@OekBundle\Repository\DeelnemerRepository'
        tags:
            - { name: oek.rapportage, category: Deelnemers }

    OekBundle\Report\DeelnemersVerwezenNaar:
        public: true
        arguments:
            - '@OekBundle\Repository\DeelnemerRepository'
        tags:
            - { name: oek.rapportage, category: Deelnemers }

    OekBundle\Report\TrainingenPerGroepNaam:
        public: true
        arguments:
            - "@oek.repository.training"
        tags:
            - { name: oek.rapportage, category: Trainingen }

    OekBundle\Report\DeelnamesPerStadsdeel:
        public: true
        arguments:
            - '@OekBundle\Repository\DeelnameRepository'
        tags:
            - { name: oek.rapportage, category: Deelnemers }

    OekBundle\Event\DeelnemerEventSubscriber:
        arguments:
            - '@event_dispatcher'
        tags:
            - { name: doctrine.event_subscriber }