{% include 'elements/iz_subnavigation.twig' %}

<h2>Koppelingen</h2>
<table class="table index filtered">
    <tr>
        {{ form_start(form) }}
            <th>
                {{ form_widget(form.klant.naam) }}
                {{ form_errors(form.klant.naam) }}
            </th>
            <th>
                {{ form_widget(form.vrijwilliger.naam) }}
                {{ form_errors(form.vrijwilliger.naam) }}
            </th>
            <th>
                {{ form_widget(form.koppelingStartdatum) }}
                {{ form_errors(form.koppelingStartdatum) }}
            </th>
            <th>
                {{ form_widget(form.koppelingEinddatum) }}
                {{ form_errors(form.koppelingEinddatum) }}
                {{ form_widget(form.lopendeKoppelingen) }}
                {{ form_label(form.lopendeKoppelingen) }}
                {{ form_errors(form.lopendeKoppelingen) }}
            </th>
            <th>
                {{ form_widget(form.izProject) }}
                {{ form_errors(form.izProject) }}
            </th>
            <th>
                {{ form_widget(form.izHulpvraagMedewerker) }}
                {{ form_errors(form.izHulpvraagMedewerker) }}
            </th>
            <th>
                {{ form_widget(form.izHulpaanbodMedewerker) }}
                {{ form_errors(form.izHulpaanbodMedewerker) }}
            </th>
            <th>
                {{ form_widget(form.klant.stadsdeel) }}
                {{ form_errors(form.klant.stadsdeel) }}
                {{ form_widget(form.filter) }}
                {{ form_widget(form.download) }}
            </th>
        {{ form_end(form) }}
    </tr>
    <tr>
        <th>
            {{ knp_pagination_sortable(pagination, 'Deelnemer', 'klant.achternaam') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Vrijwilliger', 'vrijwilliger.achternaam') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Startdatum koppeling', 'izHulpvraag.koppelingStartdatum') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Einddatum koppeling', 'izHulpvraag.koppelingEinddatum') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Project', 'izProject.naam') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Medewerker hulpvraag', 'medewerker.achternaam') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Medewerker hulpaanbod', 'medewerker.achternaam') }}
        </th>
        <th>
            {{ knp_pagination_sortable(pagination, 'Werkgebied', 'klant.werkgebied') }}
        </th>
    </tr>
    {% for i, izHulpvraag in pagination %}
        {% set url = html.url({
            'controller': 'iz_deelnemers',
            'action': 'koppelingen',
            0: izHulpvraag.izKlant.id
        }) %}
        <tr onMouseOver="this.style.cursor='pointer'" onClick="location.href='{{ url }}';">
            <td>
                {{ izHulpvraag.izKlant.klant.naam }}
            </td>
            <td>
                {{ izHulpvraag.izHulpaanbod.izVrijwilliger.vrijwilliger.naam }}
            </td>
            <td>
                {{ izHulpvraag.koppelingStartdatum is empty ? "" : izHulpvraag.koppelingStartdatum|date('d-m-Y') }}
            </td>
            <td>
                {{ izHulpvraag.koppelingEinddatum is empty ? "" : izHulpvraag.koppelingEinddatum|date('d-m-Y') }}
            </td>
            <td>
                {{ izHulpvraag.izProject }}
            </td>
            <td>
                {{ izHulpvraag.medewerker }}
            </td>
            <td>
                {{ izHulpvraag.izHulpaanbod.medewerker }}
            </td>
            <td>
                {{ izHulpvraag.izKlant.klant.werkgebied }}
            </td>
        </tr>
    {% endfor %}
</table>
<p>
    {{ knp_pagination_render(pagination) }}
</p>
