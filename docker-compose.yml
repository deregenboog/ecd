version: '3.9'

services:
  database:
    build:
      context: docker/mysql
      dockerfile: Dockerfile
  web:
    image: nginx:latest
    ports:
      - 8080:80
    volumes:
      - ${PWD}/docker/nginx.conf:/etc/nginx/conf.d/default.conf
#      - ${PWD}/app:/var/www/html/app
#      - ${PWD}/archive:/var/www/html/archive
#      - ${PWD}/bin:/var/www/html/bin
#      - ${PWD}/config:/var/www/html/config
      - ${PWD}/public:/var/www/html/public
#      - ${PWD}/src:/var/www/html/src
#      - ${PWD}/templates:/var/www/html/templates
#      - ${PWD}/tests:/var/www/html/tests
    links:
      - app
  app:
    build: .
    ports:
      - 8081:80
    volumes:
      - ${PWD}/app:/var/www/html/app
      - ${PWD}/archive:/var/www/html/archive
      - ${PWD}/bin:/var/www/html/bin
      - ${PWD}/config:/var/www/html/config
      - ${PWD}/public:/var/www/html/public
      - ${PWD}/src:/var/www/html/src
      - ${PWD}/templates:/var/www/html/templates
      - ${PWD}/tests:/var/www/html/tests
  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    ports:
      - 81:80
    environment:
      PMA_HOST: database
