{% set current_route = app.request.attributes.get('_route') %}

<ul class="nav nav-tabs">
    <li class="{{ current == 'aanmelding' ? 'active' }}">
        {% if current_route == 'iz_klanten_view' %}
            <a data-toggle="tab" href="#aanmelding">Aanmelding</a>
        {% else %}
            <a href="{{ path('iz_klanten_view', {id: klant.id, _fragment: 'aanmelding'}) }}">Aanmelding</a>
        {% endif %}
    </li>
    {% if klant.id %}
        {% if not klant.intake or not klant.intake.id %}
            <li class="{{ current == 'intake' ? 'active' }}">
                <a href="{{ path('iz_intakes_add', {deelnemer: klant.id, _fragment: 'intake'}) }}">Intake</a>
            </li>
        {% else %}
            <li class="{{ current == 'intake' ? 'active' }}">
                {% if current_route == 'iz_intakes_view' %}
                    <a data-toggle="tab" href="#intake">Intake</a>
                {% else %}
                    <a href="{{ path('iz_intakes_view', {id:klant.intake.id, _fragment: 'intake'}) }}">Intake</a>
                {% endif %}
            </li>
            <li class="{{ current == 'verslagen' ? 'active' }}">
                {% if current_route == 'iz_klanten_view' %}
                    <a data-toggle="tab" href="#verslagen">Verslagen</a>
                {% else %}
                    <a href="{{ path('iz_klanten_view', {id: klant.id, _fragment: 'verslagen'}) }}">Verslagen</a>
                {% endif %}
            </li>
            <li class="{{ current == 'documenten' ? 'active' }}">
                {% if current_route == 'iz_klanten_view' %}
                    <a data-toggle="tab" href="#documenten">Documenten</a>
                {% else %}
                    <a href="{{ path('iz_klanten_view', {id: klant.id, _fragment: 'documenten'}) }}">Documenten</a>
                {% endif %}
            </li>
            <li class="{{ current == 'koppelingen' ? 'active' }}">
                {% if current_route == 'iz_klanten_view' %}
                    <a data-toggle="tab" href="#koppelingen">Koppelingen</a>
                {% else %}
                    <a href="{{ path('iz_klanten_view', {id: klant.id, _fragment: 'koppelingen'}) }}">Koppelingen</a>
                {% endif %}
            </li>
        {% endif %}
        <li class="{{ current == 'afsluiting' ? 'active' }}">
            {% if current_route == 'iz_klanten_view' %}
                <a data-toggle="tab" href="#afsluiting">Afsluiting</a>
            {% else %}
                <a href="{{ path('iz_klanten_view', {id: klant.id, _fragment: 'afsluiting'}) }}">Afsluiting</a>
            {% endif %}
        </li>
        <li>
            <a  data-toggle="tab" href="#incidenten">Incidenten</a>
        </li>
    {% endif %}
</ul>
